(()=>{"use strict";const e=document.querySelector(".person-dialogue-container p span"),t=new Date("2022-12-18");class n{_eventHandlers;on(e,t){this._eventHandlers||(this._eventHandlers={}),this._eventHandlers[e]||(this._eventHandlers[e]=[]),this._eventHandlers[e].push(t)}off(e,t){let n=this._eventHandlers&&this._eventHandlers[e];if(n)for(let e=0;e<n.length;e++)n[e]===t&&n.splice(e--,1)}trigger(e,...t){this._eventHandlers&&this._eventHandlers[e]&&this._eventHandlers[e].forEach((e=>e.apply(this,t)))}}class r extends n{static years=["лет","год","года","года","года","лет","лет","лет","лет","лет"];static months=["месяцев","месяц","месяца","месяца","месяца","месяцев","месяцев","месяцев","месяцев","месяцев","месяцев","месяцев"];static days=["дней","день","дня","дня","дня","дней","дней","дней","дней","дней"];static hours=["часов","час","часа","часа","часа","часов","часов","часов","часов","часов"];static minutes=["минут","минуту","минуты","минуты","минуты","минут","минут","минут","минут","минут"];static seconds=["секунд","секунду","секунды","секунды","секунды","секунд","секунд","секунд","секунд","секунд"];_currentTimeBeforeEnd;constructor(e){super(),this._currentTimeBeforeEnd=new Date(Number(e)-Number(new Date)+Number(new Date("0000-01-01")))}changeTimeBeforeEnd(){this._currentTimeBeforeEnd=new Date(this._currentTimeBeforeEnd.setSeconds(this._currentTimeBeforeEnd.getSeconds()-1)),this.trigger("timeChange",s)}refreshTimerDisplay(e){let t=[0==this._currentTimeBeforeEnd.getSeconds(),0==this._currentTimeBeforeEnd.getMinutes(),0==this._currentTimeBeforeEnd.getHours(),0==this._currentTimeBeforeEnd.getDate(),0==this._currentTimeBeforeEnd.getMonth()],n=(this.trigger("minutesChange",e),this.trigger("hoursChange",e),this.trigger("daysChange",e),this.trigger("monthsChange",e),this.trigger("yearsChange",e),1);!function e(){if(!t.slice(0,n).includes(!1))return n++,e()}()}showYearsBeforeEnd(e){this.year&&(e.innerHTML=this.year)}showMonthsBeforeEnd(e){this.month&&(e.innerHTML=this.month)}showDaysBeforeEnd(e){this.day&&(e.innerHTML=this.day)}showHoursBeforeEnd(e){this.hour&&(e.innerHTML=this.hour)}showMinutesBeforeEnd(e){this.minute&&(e.innerHTML=this.minute)}showSecondsBeforeEnd(e){this.second&&(e.innerHTML=this.second)}get year(){let e=this._currentTimeBeforeEnd.getFullYear(),t=String(e).at(-1);return e+" "+r.years[Number(t)]}get month(){let e=this._currentTimeBeforeEnd.getMonth();return e+" "+r.months[e]}get day(){let e=this._currentTimeBeforeEnd.getDate(),t=10<=e&&e<20?9:String(e).at(-1);return e+" "+r.days[Number(t)]}get hour(){let e=this._currentTimeBeforeEnd.getHours(),t=10<=e&&e<20?9:String(e).at(-1);return e+" "+r.hours[Number(t)]}get minute(){let e=this._currentTimeBeforeEnd.getMinutes(),t=10<=e&&e<20?9:String(e).at(-1);return e+" "+r.minutes[Number(t)]}get second(){let e=this._currentTimeBeforeEnd.getSeconds(),t=10<=e&&e<20?9:String(e).at(-1);return e+" "+r.seconds[Number(t)]}}const s=document.querySelectorAll(".span-for-timer-date"),i=(document.querySelector(".timer-container p"),new Date("2022-12-18"),new Date("2077-01-01")),o=new r(i);o.on("timeChange",(()=>o.refreshTimerDisplay(s))),o.on("minutesChange",(()=>{o.showMinutesBeforeEnd(s[4])})),o.on("hoursChange",(()=>{o.showHoursBeforeEnd(s[3])})),o.on("daysChange",(()=>{o.showDaysBeforeEnd(s[2])})),o.on("monthsChange",(()=>{o.showMonthsBeforeEnd(s[1])})),o.on("yearsChange",(()=>{o.showYearsBeforeEnd(s[0])})),window.addEventListener("load",(()=>{o.showYearsBeforeEnd(s[0]),o.showMonthsBeforeEnd(s[1]),o.showDaysBeforeEnd(s[2]),o.showHoursBeforeEnd(s[3]),o.showMinutesBeforeEnd(s[4]),o.showSecondsBeforeEnd(s[5]),setInterval((()=>{o.changeTimeBeforeEnd(),o.showSecondsBeforeEnd(s[5])}),1e3),function(){let n=function(e){let t=0,n=new Date(+e);for(;Number(n)<Number(new Date);)n.setDate(n.getDate()+1),t++;return t}(t);e.innerText=`${n}`}()}))})();